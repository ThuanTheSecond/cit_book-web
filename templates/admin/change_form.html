{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}
{{ block.super }}
<script src="{% url 'admin:jsi18n' %}"></script>
{{ media }}
<style>
  /* Custom styling for change form */
  .object-tools {
    margin-top: 15px;
    font-size: 14px;
  }
  
  .object-tools li {
    margin-left: 10px;
  }
  
  .module {
    margin-bottom: 20px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }
  
  fieldset {
    padding: 15px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    margin-bottom: 15px;
  }
  
  fieldset.collapsed h2 {
    border-radius: 8px;
  }
  
  .form-row {
    padding: 12px 0;
    border-bottom: 1px solid #f1f5f9;
  }
  
  .form-row:last-child {
    border-bottom: none;
  }
  
  .form-row div.help {
    padding: 5px 0 0 0;
    margin-left: 0;
    color: #718096;
  }
  
  .aligned label {
    padding: 5px 10px 0 0;
    color: #4a5568;
    font-weight: 500;
  }
  
  .submit-row {
    margin: 20px 0;
    background: #f8fafc;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }
  
  #changelist-form .results {
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }
  .inline-deletelink{
    display: none;
  }
</style>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
{% endblock %}

{% block bodyclass %}{{ block.super }} app-{{ opts.app_label }} model-{{ opts.model_name }} change-form{% endblock %}

{% block content %}
<div id="content-main">
  <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post" id="{{ opts.model_name }}_form" novalidate>
    {% csrf_token %}
    {% block form_top %}{% endblock %}
    
    {% if errors %}
      <div class="errornote">
        {% if errors|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}
        {{ errors }}
      </div>
    {% endif %}
    
    <div class="form-container">
      {% block field_sets %}
        {% for fieldset in adminform %}
          {% include "admin/includes/fieldset.html" %}
        {% endfor %}
      {% endblock %}
      
      {% block after_field_sets %}{% endblock %}
      
      {% block inline_field_sets %}
        {% for inline_admin_formset in inline_admin_formsets %}
          {% include inline_admin_formset.opts.template %}
        {% endfor %}
      {% endblock %}
      
      {% block after_related_objects %}{% endblock %}
      
      {% block submit_buttons_bottom %}
        <div class="submit-row">
          {% if show_save %}
            <input type="submit" value="{% trans 'Save' %}" class="default" name="_save">
          {% endif %}
          
          {% if show_save_and_continue %}
            <input type="submit" value="{% trans 'Save and continue editing' %}" name="_continue">
          {% endif %}
          
          {% if show_save_and_add_another %}
            <input type="submit" value="{% trans 'Save and add another' %}" name="_addanother">
          {% endif %}
          
          {% if show_delete_link and original %}
            {% url opts|admin_urlname:'delete' original.pk|admin_urlquote as delete_url %}
            <a href="{% add_preserved_filters delete_url %}" class="deletelink" style="color:#dc3545">{% trans "Delete" %}</a>
          {% endif %}
        </div>
      {% endblock %}
      
      {% block admin_change_form_document_ready %}
        <script id="django-admin-form-add-constants" src="{% static 'admin/js/change_form.js' %}" {% if adminform and add %}data-model-name="{{ opts.model_name }}"{% endif %}></script>
      {% endblock %}
      
      {# JavaScript for prepopulated fields #}
      {% prepopulated_fields_js %}
    </div>
  </form>
</div>
{% endblock %} 