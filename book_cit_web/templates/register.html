{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>CIT - Book recommender system</title>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!--Bootstrap-->
  <link type="text/css" rel="stylesheet" href="{% static 'Css/bootstrap.min.css' %}" />

  <!-- Slick -->
  <link type="text/css" rel="stylesheet" href="{% static 'Css/slick.css' %}" />
  <link type="text/css" rel="stylesheet" href="{% static 'Css/slick-theme.css' %}" />

  <!-- nouislider -->
  <link type="text/css" rel="stylesheet" href="{% static 'Css/nouislider.min.css' %}" />

  <!-- Font Awesome Icon -->
  <link rel="stylesheet" href="{% static 'Css/font-awesome.min.css' %}">

  <!-- Custom stlylesheet -->
  <link type="text/css" rel="stylesheet" href="{% static 'Css/style.css' %}" />
  <link type="text/css" rel="stylesheet" href="{% static 'Css/customSlick.css' %}" />
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
  
  <style>
    body {
      background-color: #f5f5f5;
      font-family: 'Roboto', sans-serif;
    }
    
    .register-page {
      min-height: calc(100vh - 60px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 0;
    }
    
    .register-container {
      background: white;
      border-radius: 10px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
    }
    
    .register-row {
      display: flex;
      flex-wrap: wrap;
    }
    
    .register-image {
      flex: 1;
      min-width: 300px;
      background-image: url('{% static "img/library-bg.jpg" %}');
      background-size: cover;
      background-position: center;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 30px;
      color: white;
      text-align: center;
    }
    
    .register-image:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 128, 128, 0.8) 0%, rgba(0, 179, 179, 0.8) 100%);
      z-index: 1;
    }
    
    .register-image-content {
      position: relative;
      z-index: 2;
    }
    
    .register-image h2 {
      font-weight: 700;
      font-size: 28px;
      margin-bottom: 20px;
    }
    
    .register-image p {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 0;
      opacity: 0.9;
    }
    
    .register-form-container {
      flex: 1;
      min-width: 300px;
      padding: 40px;
    }
    
    .register-title {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .register-title h3 {
      font-size: 26px;
      color: #333;
      font-weight: 500;
      margin-bottom: 10px;
    }
    
    .form-floating {
      margin-bottom: 16px;
    }
    
    .form-floating .form-control {
      border-radius: 8px;
      border: 1px solid #ddd;
      padding: 10px 15px;
      height: 50px;
      font-size: 16px;
    }
    
    .form-floating .form-control:focus {
      box-shadow: 0 0 0 3px rgba(0, 128, 128, 0.15);
      border-color: #008080;
    }
    
    .form-floating label {
      padding: 12px 15px;
      color: #555;
    }
    
    .form-group label {
      font-weight: 500;
      margin-bottom: 8px;
    }
    
    .register-btn {
      display: block;
      width: 100%;
      padding: 12px 0;
      background: #008080;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .register-btn:hover {
      background: #006666;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .register-footer {
      text-align: center;
      margin-top: 30px;
    }
    
    .register-footer p {
      margin-bottom: 0;
      color: #666;
    }
    
    .register-footer a {
      color: #008080;
      text-decoration: none;
      font-weight: 500;
    }
    
    .register-footer a:hover {
      text-decoration: underline;
    }
    
    .social-register {
      margin-top: 30px;
      text-align: center;
    }
    
    .google-btn {
      display: inline-flex;
      align-items: center;
      padding: 10px 20px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      color: #333;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .google-btn .fa {
      margin-right: 10px;
      color: #db4437;
    }
    
    .google-btn:hover {
      background: #f5f5f5;
      border-color: #ccc;
    }
    
    .separator {
      display: flex;
      align-items: center;
      text-align: center;
      margin: 20px 0;
    }
    
    .separator::before,
    .separator::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid #ddd;
    }
    
    .separator span {
      padding: 0 15px;
      color: #999;
      font-size: 14px;
    }
    
    .error-msg {
      padding: 12px;
      background: rgba(220, 53, 69, 0.08);
      color: #dc3545;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .progress-step {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }
    
    .step-item {
      position: relative;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: #e0e0e0;
      margin: 0 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 12px;
      color: #666;
    }
    
    .step-item.active {
      background: #008080;
      color: white;
    }
    
    .step-item:after {
      content: "";
      position: absolute;
      width: 50px;
      height: 2px;
      background: #e0e0e0;
      left: 25px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    .step-item:last-child:after {
      display: none;
    }
    
    .step-item.active:after {
      background: #008080;
    }
    
    .form-tip {
      font-size: 12px;
      color: #666;
      margin-top: 6px;
    }
    
    @media (max-width: 767px) {
      .register-image {
        min-height: 200px;
      }
    }
  </style>
  
  <meta name="csrf-token" content="{{ csrf_token }}">
</head>

<body id="register">
    {% include 'header.html' %}

    <div class="register-page">
      <div class="container">
        <div class="register-container">
          <div class="register-row">
            <!-- Left side - Image with overlay -->
            <div class="register-image">
              <div class="register-image-content">
                <h2>Tạo tài khoản</h2>
                <p>Trở thành thành viên của CIT Library để khám phá thế giới sách và nhận được những gợi ý sách phù hợp với sở thích của bạn.</p>
              </div>
            </div>
            
            <!-- Right side - Register form -->
            <div class="register-form-container">
              <div class="register-title">
                <h3>Đăng ký</h3>
              </div>
              
              <form class="register-form" action="{% url 'register' %}" method="POST">
                {% csrf_token %}
                
                {% if form.non_field_errors %}
                <div class="error-msg">
                  {% for error in form.non_field_errors %}
                    <div>{{ error }}</div>
                  {% endfor %}
                </div>
                {% endif %}
                
                <div class="form-group mb-3">
                  <label for="id_email">Email</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                    {% render_field form.email class="form-control" placeholder="Nhập vào email" id="id_email" %}
                  </div>
                  {% if form.email.errors %}
                  <div class="form-tip text-danger">
                    {% for error in form.email.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                  {% endif %}
                  <div class="form-tip">Email sẽ được sử dụng để khôi phục tài khoản khi cần thiết</div>
                </div>
                
                <div class="form-group mb-3">
                  <label for="id_username">Tên đăng nhập</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-user"></i></span>
                    {% render_field form.username class="form-control" placeholder="Nhập vào tên đăng nhập" id="id_username" %}
                  </div>
                  {% if form.username.errors %}
                  <div class="form-tip text-danger">
                    {% for error in form.username.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                  {% endif %}
                </div>
                
                <div class="form-group mb-3">
                  <label for="id_password1">Mật khẩu</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-lock"></i></span>
                    {% render_field form.password1 class="form-control" placeholder="Nhập vào mật khẩu" id="id_password1" %}
                  </div>
                  {% if form.password1.errors %}
                  <div class="form-tip text-danger">
                    {% for error in form.password1.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                  {% endif %}
                  <div class="form-tip">Mật khẩu nên có ít nhất 8 ký tự và kết hợp chữ, số và ký tự đặc biệt</div>
                </div>
                
                <div class="form-group mb-3">
                  <label for="id_password2">Xác nhận mật khẩu</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-lock"></i></span>
                    {% render_field form.password2 class="form-control" placeholder="Nhập lại mật khẩu" id="id_password2" %}
                  </div>
                  {% if form.password2.errors %}
                  <div class="form-tip text-danger">
                    {% for error in form.password2.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                  {% endif %}
                </div>
                
                <div class="form-group">
                  <button type="submit" class="register-btn">Đăng ký</button>
                </div>
                
                <div class="separator">
                  <span>hoặc</span>
                </div>
                
                <div class="social-register">
                  <a href="#" class="google-btn">
                    <i class="fa fa-google"></i> Đăng ký bằng Google
                  </a>
                </div>
                
                <div class="register-footer">
                  <p>Đã có tài khoản? <a href="{% url 'login' %}">Đăng nhập ngay</a></p>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer id="footer">
      <div id="bottom-footer" class="section">
        <div class="container">
          <div class="row">
            <div class="col-md-12 text-center">
              <span class="copyright">
                Copyright &copy; {% now "Y" %} CIT Library. All rights reserved
              </span>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- jQuery Plugins -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/slick.min.js' %}"></script>
    <script src="{% static 'js/nouislider.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
</body>

</html>
